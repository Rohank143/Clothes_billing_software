<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Tailor Information Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f2f2f2;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh; /* Full viewport height */
        }

        #tailorform {
            position: relative; /* Position relative for the back button */
            width: 100%;
            max-width: 600px;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .btn-back {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #007bff;
            color: white;
            padding: 8px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            font-size: 14px;
        }

        .btn-back:hover {
            background-color: #0056b3;
        }

        h2 {
            text-align: center;
            color: #333;
        }

        label {
            font-weight: bold;
        }

        input[type="text"],
        input[type="number"],
        textarea,
        select,
        input[type="date"] {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        button[type="submit"] {
            background-color: #4CAF50;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            float: right;
        }

        button[type="submit"]:hover {
            background-color: #45a049;
        }

        /* Hidden success message */
        .success-message {
            display: none;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
        }

        /* Error message style */
        .error-message {
            color: red;
            margin-top: 5px;
        }

        .alert {
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid transparent;
            border-radius: 4px;
        }

        .alert-danger {
            color: #721c24; /* Dark red color */
            background-color: #f8d7da; /* Light red background color */
            border-color: #f5c6cb; /* Light red border color */
        }
    </style>
</head>
<body>
<div id="tailorform">
    <a href="#" onclick="window.history.back();" class="btn-back">Back</a>
    <h2>Tailor Information Form</h2>

    <div th:if="${errorMessage}" class="alert alert-danger" role="alert">
        <span th:text="${errorMessage}"></span>
    </div>

    <form action="#" th:action="@{/SaveTailor}" th:object="${tailor}" method="post" onsubmit="return showSuccessMessage()">
        <input type="hidden" th:field="*{Tailor_id}">

        <label for="TailorName">Name:</label>
        <input type="text" id="TailorName" th:field="*{Tailor_name}" required><br>

        <label for="Shop_name">ShopName:</label>
        <input type="text" id="Shop_name" th:field="*{Shop_name}" required><br>

        <label for="TailorState">State:</label>
        <select id="stateSelect" th:field="*{Tailor_State}" onchange="populateCities()" required>
            <option value="">Select a state</option>
            <!-- Add options for states here -->
            <option value="Andhra Pradesh">Andhra Pradesh</option>
            <!-- More options -->
        </select>

        <label for="TailorCity">City:</label>
        <select id="citySelect" th:field="*{Tailor_City}" required>
            <option value="">Select a city</option>
            <!-- Options for cities will be populated dynamically based on state selection -->
        </select>

        <label for="TailorAddress">Address:</label>
        <input type="text" id="TailorAddress" th:field="*{Shop_address}" required><br>

        <label for="TailorMobileNo">Mobile Number:</label>
        <input type="text" id="TailorMobileNo" th:field="*{Mobile_no}" required>
        <span id="phoneError" class="error-message"></span><br>

        <label for="TailorType">Type:</label>
        <select id="TailorType" th:field="*{Type}" required>
            <option value="Regular">Regular</option>
            <option value="Premium">New</option>
        </select><br>

        <label for="TailorDate">Date:</label>
        <input type="date" id="TailorDate" th:field="*{Date}" required><br>

        <button type="submit">Save</button>
    </form>

    <!-- Success message -->
    <div class="success-message" id="successMessage">
        Tailor saved successfully!
    </div>
</div>

<script th:inline="javascript">
    /* Thymeleaf inline JavaScript for showing success message */
    function showSuccessMessage() {
        var mobileNoInput = document.getElementById('TailorMobileNo');
        var phoneError = document.getElementById('phoneError');
        
        // Regular expression to check if the input is a 10-digit number
        var mobileNoPattern = /^\d{10}$/;

        if (!mobileNoPattern.test(mobileNoInput.value.trim())) {
            phoneError.innerHTML = 'Please enter a valid 10-digit mobile number.';
            return false;
        } else {
            phoneError.innerHTML = ''; // Clear any previous error message
        }

        return true;
    }

    function populateCities() {
        var stateSelect = document.getElementById("stateSelect");
        var citySelect = document.getElementById("citySelect");
        var state = stateSelect.value;

        // Clear previous options
        citySelect.innerHTML = '<option value="">Select a city</option>';

        // Populate cities based on selected state
        switch (state) {
            case "Andhra Pradesh":
                var cities = ["Visakhapatnam", "Vijayawada", "Guntur", "Nellore", "Kurnool", "Rajahmundry", "Tirupati", "Kakinada", "Anantapur", "Kadapa", "Eluru", "Ongole", "Vizianagaram", "Tenali", "Proddatur", "Adoni", "Machilipatnam", "Chittoor", "Hindupur"];
                break;
            // More cases for states...
            default:
                var cities = [];
                break;
        }

        // Add cities to the city select dropdown
        cities.forEach(function (city) {
            var option = document.createElement("option");
            option.text = city;
            option.value = city;
            citySelect.appendChild(option);
        });
    }

    // Trigger population of cities on page load (if editing existing tailor)
    document.addEventListener('DOMContentLoaded', function () {
        populateCities();
    });
</script>
</body>
</html>
